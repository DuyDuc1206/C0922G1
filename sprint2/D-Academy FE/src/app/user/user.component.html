<main>

  <!-- page title area start -->
  <section class="page__title-area page__title-height page__title-overlay d-flex align-items-center"
           data-background="assets/img/page-title/page-title-2.jpg">
    <div class="container">
      <div class="row">
        <div class="col-xxl-12">
          <div class="page__title-wrapper mt-110">
            <h3 class="page__title">Account</h3>
            <nav aria-label="breadcrumb">
              <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                <li class="breadcrumb-item active" aria-current="page">Account</li>
              </ol>
            </nav>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- page title area end -->

  <div class="container">
    <div class="main-body">
      <!-- /Breadcrumb -->

      <div class="row gutters-sm">
        <div class="col-md-4 mb-3">
          <div class="card">
            <div class="card-body">
              <div class="d-flex flex-column align-items-center text-center">
                <img src="{{user.avatar}}" alt="user" class="rounded-circle"
                     width="150">
                <div class="mt-3">
                  <h4>{{user.name}}</h4>
                </div>
              </div>
            </div>
          </div>
          <div class="card mt-3">
            <ul class="list-group list-group-flush">
              <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap btn"
                  (click)="getProfile()">
                <h6 class="mb-0 ">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                       class="bi bi-person-lines-fill" viewBox="0 0 16 16">
                    <path
                      d="M6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-5 6s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zM11 3.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5zm.5 2.5a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1h-4zm2 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2zm0 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2z"/>
                  </svg>
                  Personal information
                </h6>
              </li>
              <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap btn"
                  (click)="purchaseHistory()">
                <h6 class="mb-0">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                       class="bi bi-hourglass-split" viewBox="0 0 16 16">
                    <path
                      d="M2.5 15a.5.5 0 1 1 0-1h1v-1a4.5 4.5 0 0 1 2.557-4.06c.29-.139.443-.377.443-.59v-.7c0-.213-.154-.451-.443-.59A4.5 4.5 0 0 1 3.5 3V2h-1a.5.5 0 0 1 0-1h11a.5.5 0 0 1 0 1h-1v1a4.5 4.5 0 0 1-2.557 4.06c-.29.139-.443.377-.443.59v.7c0 .213.154.451.443.59A4.5 4.5 0 0 1 12.5 13v1h1a.5.5 0 0 1 0 1h-11zm2-13v1c0 .537.12 1.045.337 1.5h6.326c.216-.455.337-.963.337-1.5V2h-7zm3 6.35c0 .701-.478 1.236-1.011 1.492A3.5 3.5 0 0 0 4.5 13s.866-1.299 3-1.48V8.35zm1 0v3.17c2.134.181 3 1.48 3 1.48a3.5 3.5 0 0 0-1.989-3.158C8.978 9.586 8.5 9.052 8.5 8.351z"/>
                  </svg>
                  Purchase history
                </h6>
              </li>
            </ul>
          </div>
        </div>
        <div class="col-md-8">
          <div class="card mb-3" *ngIf="profile">
            <br>
            <h2 class="text-center">Personal information</h2>
            <div class="card-body ml-5">
              <div class="row">
                <div class="col-sm-3">
                  <h6 class="mb-0">Name</h6>
                </div>
                <div class="col-sm-9 text-dark">
                  {{user.name}}
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col-sm-3">
                  <h6 class="mb-0">Email</h6>
                </div>
                <div class="col-sm-9 text-dark">
                  {{user.email}}
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col-sm-3">
                  <h6 class="mb-0">Phone number</h6>
                </div>
                <div class="col-sm-9 text-dark">
                  {{user.phoneNumber}}
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col-sm-3">
                  <h6 class="mb-0">Date Of Birth</h6>
                </div>
                <div class="col-sm-9 text-dark">
                  {{user.dateOfBirth| date:"dd/MM/yyyy" }}
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col-sm-3">
                  <h6 class="mb-0">Gender</h6>
                </div>
                <div class="col-sm-9 text-dark">
                  {{user.gender ? 'Man' : 'Woman'}}
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col-sm-3">
                  <h6 class="mb-0">Address</h6>
                </div>
                <div class="col-sm-9 text-dark">
                  {{user.address}}
                </div>
              </div>
              <hr>
            </div>
          </div>

          <div class="row gutters-sm" *ngIf="purchase">
            <div class="col-sm-12 mb-3">
              <div class="card h-100">
                <div class="card-body">
                  <h2 class="text-center">Purchase history</h2>
                  <hr>
                  <table class="table">
                    <thead>
                    <tr>
                      <th scope="col">No.</th>
                      <th scope="col">Order Code</th>
                      <th scope="col">Purchase Date</th>
                      <th scope="col">Price</th>
                      <th scope="col">Detail</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr *ngFor="let order of orderList, index as i">
                      <th scope="row">{{i + 1}}</th>
                      <td>{{order.codeOrder}}</td>
                      <td>{{order.orderDate| date:"dd/MM/yyyy"}}</td>
                      <td>{{order.totalPrice }}$</td>
                      <td>
                        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#cartDetail" (click)="detailPurchase(order.codeOrder)">
                          View
                        </button>
                      </td>
                    </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


  <!-- Modal detail-->
  <div class="modal fade" id="cartDetail" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel1"
       aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document" style="width: 1000px">
      <div class="modal-content">
        <h3 class="modal-title text-center mt-3" id="exampleModalLabel1">Order Detail</h3>
        <div class="modal-body">
          <table class="table">
            <thead>
            <tr>
              <th scope="col">No.</th>
              <th scope="col">Image</th>
              <th scope="col">Course</th>
              <th scope="col">Quantity</th>
              <th scope="col">Price</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let purchase of detailList, index as i">
              <th scope="row">{{i + 1}}</th>
              <td><img src="{{purchase.thumbnail}}" style="width: 50px; height: 50px" alt=""></td>
              <td>{{purchase.courseName}}</td>
              <td>{{purchase.quantity}}</td>
              <td>{{purchase.totalPrice}}</td>
            </tr>
            </tbody>
          </table>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal" style="border-radius: 15px">Close</button>
        </div>
      </div>
    </div>
  </div>
</main>

